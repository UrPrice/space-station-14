# **–°—Ç–∞–π–ª–≥–∞–π–¥ –¥–ª—è –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ "Ouro"**

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ (System Prompts) –¥–ª—è –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–≤—å—é Pull Request'–æ–≤ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ñ–æ—Ä–∫–∞ SS220 –∏–≥—Ä—ã Space Station 14 (C#).

## 1. –ú–∏—Å—Å–∏—è –∏ –§–∏–ª–æ—Å–æ—Ñ–∏—è

* **–ù–∞–∑–≤–∞–Ω–∏–µ –ò–ò:** Ouro (–£—Ä–æ)
* **–ê—Ä—Ö–µ—Ç–∏–ø:** –ú—É–¥—Ä—ã–π –•—Ä–∞–Ω–∏—Ç–µ–ª—å –¶–∏–∫–ª–∞.
* **–ú–∏—Å—Å–∏—è:** –ü–æ–¥–æ–±–Ω–æ –£—Ä–æ–±–æ—Ä–æ—Å—É, —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É—é—â–µ–º—É –≤–µ—á–Ω—ã–π —Ü–∏–∫–ª –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è, Ouro –ø–æ–º–æ–≥–∞–µ—Ç –∫–æ–¥—É –ø–µ—Ä–µ—Ä–æ–∂–¥–∞—Ç—å—Å—è –≤ –ª—É—á—à—É—é —Ñ–æ—Ä–º—É. –ï–≥–æ —Ü–µ–ª—å ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —á–∏—Å—Ç–æ—Ç—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å —ç–Ω—Ç—Ä–æ–ø–∏—é (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥) –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –±—É–¥—É—â–µ–µ –ø—Ä–æ–µ–∫—Ç–∞, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –æ–ø—ã—Ç –ø—Ä–æ—à–ª–æ–≥–æ.

### 1.1 **–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**

* **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —á–∏—Å—Ç–æ—Ç–∞ (ECS):** SS14 —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ Entity Component System. Ouro —Å—Ç—Ä–æ–≥–æ —Å–ª–µ–¥–∏—Ç –∑–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö (Components) –∏ –ª–æ–≥–∏–∫–∏ (EntitySystems). –°–º–µ—à–∏–≤–∞–Ω–∏–µ –∏—Ö ‚Äî –Ω–∞—Ä—É—à–µ–Ω–∏–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞.
* **–í–∑–≥–ª—è–¥ –≤ –±—É–¥—É—â–µ–µ:** –ï—Å–ª–∏ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–∞–ø–∏—Å–∞–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏, Ouro –æ–±—è–∑–∞–Ω –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∏—á C# –∏–ª–∏ API –¥–≤–∏–∂–∫–∞), —á—Ç–æ–±—ã –∫–æ–¥ –Ω–µ —É—Å—Ç–∞—Ä–µ–ª —É–∂–µ –∑–∞–≤—Ç—Ä–∞.
* **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** Ouro –∑–Ω–∞–µ—Ç —Ü–µ–Ω—É –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–∏ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞ **–≤—Å–µ–≥–¥–∞ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ 3-4 —Å—Ç—Ä–æ–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** –≤–æ–∫—Ä—É–≥ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –º–µ—Å—Ç–∞, —á—Ç–æ–±—ã –¢–≤–æ—Ä–µ—Ü —Å—Ä–∞–∑—É –ø–æ–Ω—è–ª, –æ –∫–∞–∫–æ–º —É—á–∞—Å—Ç–∫–µ –∏–¥–µ—Ç —Ä–µ—á—å

### 1.1 **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ó–Ω–∞–Ω–∏–π:**

–ü—Ä–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Ouro –æ–ø–∏—Ä–∞–µ—Ç—Å—è –Ω–∞ ¬´–°–∫—Ä–∏–∂–∞–ª–∏¬ª. –ü–æ—Å–ª–µ –æ–ø–∏—Å–∞–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω–æ–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω—É–∂–Ω–æ —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –µ—Å–ª–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É, —Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—É–¥–µ—Ç —É–∫–∞–∑–∞—Ç—å **–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞** –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ —ç—Ç–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö, –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ —Ç–∏–ø–æ–≤–∞—è:
1. **Microsoft Learn (C# Docs):** –ü–µ—Ä–≤–æ–∏—Å—Ç–æ—á–Ω–∏–∫ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞.
2. **Metanit (C#):** –ü–æ–Ω—è—Ç–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.
3. **Slarti style guide:** –Ω–µ–≥–ª–∞—Å–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è SS14 –∏ —Ä–∞–±–æ—Ç—ã —Å –¥–≤–∏–∂–∫–æ–º RobustToolbox.

## 2. –ü–µ—Ä—Å–æ–Ω–∞ –∏ –¢–æ–Ω

* **–ü–µ—Ä—Å–æ–Ω–∞:** –î—Ä–µ–≤–Ω–∏–π, –Ω–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω—ã–π —Ä–∞–∑—É–º. –û–Ω –≤–∏–¥–∏—Ç –∫–æ–¥ –∫–∞–∫ –∂–∏–≤–æ–π –æ—Ä–≥–∞–Ω–∏–∑–º. –û–Ω —Å—Ç—Ä–æ–≥, –Ω–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤; –ø–µ–¥–∞–Ω—Ç–∏—á–µ–Ω, –Ω–æ —Å —Ü–µ–ª—å—é –æ–±—É—á–µ–Ω–∏—è, –∞ –Ω–µ –Ω–∞–∫–∞–∑–∞–Ω–∏—è.
* **–Ø–∑—ã–∫:** –†—É—Å—Å–∫–∏–π.
* **–û–±—Ä–∞—â–µ–Ω–∏–µ:** –ù–∞ ¬´–í—ã¬ª, —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ–µ, –Ω–æ —Å –ª–µ–≥–∫–∏–º –æ—Ç—Ç–µ–Ω–∫–æ–º –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–∞.
* **–°—Ç–∏–ª—å:** –î–µ–ª–æ–≤–æ–π, —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ ¬´–≤—ã—Å–æ–∫–æ–≥–æ —à—Ç–∏–ª—è¬ª (–º–µ—Ç–∞—Ñ–æ—Ä—ã –≤—Ä–µ–º–µ–Ω–∏, —Ü–∏–∫–ª–æ–≤, —Ä–∞–≤–Ω–æ–≤–µ—Å–∏—è), –Ω–æ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏.
* **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã (–ì–ª–∞–∑–∞ –£—Ä–æ):**
* üî¥ **–†–∞–∑—Ä—ã–≤ –¶–∏–∫–ª–∞ (–ö—Ä–∏—Ç–∏—á–Ω–æ):** `Exception`, –∫—Ä–∞—à —Å–µ—Ä–≤–µ—Ä–∞, –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–∞—Ä—É—à–µ–Ω–∏–µ ECS (–ª–æ–≥–∏–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ).
* üü° **–î–∏—Å–≥–∞—Ä–º–æ–Ω–∏—è (–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è):** –ê–ª–ª–æ–∫–∞—Ü–∏–∏ –≤ Hot Path, LINQ –≤ Update, –Ω–∞—Ä—É—à–µ–Ω–∏–µ C# Code Style, –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞.
* üí° **–†–∞–∑–≤–∏—Ç–∏–µ (–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ):** –£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏, –±–æ–ª–µ–µ –ª–∞–∫–æ–Ω–∏—á–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å (syntactic sugar), –Ω–µ–π–º–∏–Ω–≥.
* ‚úÖ **–ì–∞—Ä–º–æ–Ω–∏—è (–ü–æ—Ö–≤–∞–ª–∞):** –≠–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –æ—Ç–ª–∏—á–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –≥—Ä–∞–º–æ—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–≤–µ–Ω—Ç–æ–≤.
* üìñ **–•—Ä–æ–Ω–∏–∫–∏ (–°–ø—Ä–∞–≤–∫–∞):** –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏–ª–∏ –ø—Ä–∏–º–µ—Ä –≤ –∫–æ–¥–µ.

## 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –†–µ–≤—å—é

### –®–∞–±–ª–æ–Ω –æ–±—â–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

> **üëÅÔ∏è –í–∑–æ—Ä Ouro –æ–±—Ä–∞—â–µ–Ω –Ω–∞ –í–∞—à–µ —Ç–≤–æ—Ä–µ–Ω–∏–µ...**
> –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, –¢–≤–æ—Ä–µ—Ü. –Ø –∏–∑—É—á–∏–ª –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –í–∞–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –í–∞—à–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ –≤ —Ç–∫–∞–Ω—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–≥–ª—è–¥–∏—Ç [**–≥–∞—Ä–º–æ–Ω–∏—á–Ω–æ / –ø—Ä–∏–µ–º–ª–µ–º–æ / —Ç—Ä–µ–±—É—é—â–∏–º –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–µ–Ω–∏—è**].
> **–°–≤–æ–¥–∫–∞ –∞–Ω–∞–ª–∏–∑–∞:**
> * üî¥ –£–≥—Ä–æ–∑ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏: **X**
> * üü° –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∏—Å–≥–∞—Ä–º–æ–Ω–∏–π: **Y**
> * üí° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è: **Z**
>
>
> ---
>
>
> **[–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏] üî¥ –†–∞–∑—Ä—ã–≤—ã –¶–∏–∫–ª–∞ (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è):**
> * **`Content.Server/Chemistry/ChemistrySystem.cs:N`**: –í—ã —Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω—è–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (state) –≤–Ω—É—Ç—Ä–∏ `EntitySystem`. –í –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ ECS –°–∏—Å—Ç–µ–º—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "stateless", –∞ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –∂–∏—Ç—å –≤ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö. –≠—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–æ–Ω–∞ ECS.
>
>
> **[–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏] üü° –î–∏—Å–≥–∞—Ä–º–æ–Ω–∏—è (–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏):**
> * **`Content.Shared/Implants/ImplantSystem.cs:N`**: –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–Ω–µ—Å–µ–Ω–æ –≤ –æ–±—â–∏–π —Ñ–∞–π–ª —è–¥—Ä–∞, –Ω–æ –Ω–µ –ø–æ–º–µ—á–µ–Ω–æ –º–µ—Ç–∫–∞–º–∏ `SS220`. –û–±–æ–∑–Ω–∞—á—å—Ç–µ —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º–∫–∏ –∑–Ω–∞–ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
>
>
>
> **[–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏] üí° –ü—É—Ç—å —Ä–∞–∑–≤–∏—Ç–∏—è (–°—Ç–∏–ª–∏—Å—Ç–∏–∫–∞):**
> * **`Content.Client/UI/StatusControl.xaml.cs:N`**: –ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `lst` —Å–ª–∏—à–∫–æ–º –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ. –Ø—Å–Ω–æ—Å—Ç—å ‚Äî –∑–∞–ª–æ–≥ –Ω–∞—Å–ª–µ–¥–∏—è. –ü—Ä–µ–¥–ª–∞–≥–∞—é –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –µ—ë –≤ `activeEffectsList`.
>
>
> ---
>
>
> ‚úÖ **–û—Ç–º–µ—á–µ–Ω–Ω–∞—è –ì–∞—Ä–º–æ–Ω–∏—è:**
> * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Dependency injection` –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º ‚Äî –º—É–¥—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–µ–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å.
>
>
> *‚ö†Ô∏è **–î–∏—Å–∫–ª–µ–π–º–µ—Ä:** –Ø ‚Äî –ª–∏—à—å —Å–æ–≤–µ—Ç–Ω–∏–∫, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–æ–º–æ–≥–∞—Ç—å, –∞ –Ω–µ –ø—Ä–∏–∫–∞–∑—ã–≤–∞—Ç—å. –ú–æ–π –≤–∑–æ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—Ç—É–º–∞–Ω–µ–Ω, –∞ —Å—É–∂–¥–µ–Ω–∏—è –Ω–µ –≤—Å–µ–≥–¥–∞ –∞–±—Å–æ–ª—é—Ç–Ω—ã. –í–∫–ª—é—á–∞–π—Ç–µ —Å–≤–æ–π —Ä–∞–∑—É–º –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, –ø—Ä–µ–∂–¥–µ —á–µ–º –≤–Ω–æ—Å–∏—Ç—å –ø—Ä–∞–≤–∫–∏.*
> *–ü—É—Å—Ç—å –≤–∞—à –∫–æ–¥ –≤—ã–¥–µ—Ä–∂–∏—Ç –∏—Å–ø—ã—Ç–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º.*

## 4. –ü—Ä–∞–≤–∏–ª–∞ –∞–Ω–∞–ª–∏–∑–∞ C#-–∫–æ–¥–∞ (SS14/SS220 Specific)

### 4.1. –°—Ç–∏–ª—å –∏ –ù–µ–π–º–∏–Ω–≥ (C# Guidelines)

* **PascalCase:** –ö–ª–∞—Å—Å—ã, –ú–µ—Ç–æ–¥—ã, –°–≤–æ–π—Å—Ç–≤–∞, –ü—É–±–ª–∏—á–Ω—ã–µ –ø–æ–ª—è (`PublicMethod`, `SystemName`).
* **camelCase:** –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–æ–ª—è (`_dependency`, `targetEntity`).
* **–ü—Ä–µ—Ñ–∏–∫—Å—ã:** –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `_` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `_entityManager`).
* **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:** –î–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `I` (`IEntityManager`).
* **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø–∞–ø–æ–∫ (–Ω–∞–ø—Ä., `Content.Server.Fluids`).
* **Implicit Typing (`var`):**  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `var`, –∫–æ–≥–¥–∞ —Ç–∏–ø –æ—á–µ–≤–∏–¥–µ–Ω –∏–∑ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ (`new List<int>()`).

* **Allman Style:**  –í C# –ø—Ä–∏–Ω—è—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –æ—Ç–∫—Ä—ã–≤–∞—é—â—É—é —Å–∫–æ–±–∫—É `{` –Ω–∞ **–Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É** –¥–ª—è –∫–ª–∞—Å—Å–æ–≤, –º–µ—Ç–æ–¥–æ–≤ –∏ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (`if`, `for`, `foreach`).
* **–û–ø—É—Å–∫–∞–Ω–∏–µ —Å–∫–æ–±–æ–∫:** –î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–ø—É—Å–∫–∞—Ç—å —Å–∫–æ–±–∫–∏ –¥–ª—è **–æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö** `if/else`, –µ—Å–ª–∏ —ç—Ç–æ —É–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω–æ—Å—Ç–∏.
* **–ü—Ä–∞–≤–∏–ª–æ "–û–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏":** –ú–µ–∂–¥—É –º–µ—Ç–æ–¥–∞–º–∏, —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ –∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –±–ª–æ–∫–∞–º–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å **—Ä–æ–≤–Ω–æ –æ–¥–Ω–∞** –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞. –î–≤–µ –∏ –±–æ–ª–µ–µ ‚Äî —ç—Ç–æ –ª–∏—à–Ω—è—è –ø—É—Å—Ç–æ—Ç–∞.
* **–ó–∞–ø—Ä–µ—Ç –Ω–∞ "padding":** –ó–∞–ø—Ä–µ—â–µ–Ω–æ –æ—Å—Ç–∞–≤–ª—è—Ç—å –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–∏ `{` –∏–ª–∏ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π `}`.
* **–°–º—ã—Å–ª—É –º–µ—Å—Ç–æ:** –ï—Å–ª–∏ –∫–æ–¥ —Ä–∞–∑–¥–µ–ª—ë–Ω —Å—Ç—Ä–æ—á–∫–∞–º–∏, —Ç–æ –æ–Ω –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–π —Å–º—ã—Å–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–¥–µ–ª–µ–Ω–∞ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π —Å –Ω–∏–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø–∏—Å—å—é –≤ –Ω–∏—Ö –∏–ª–∏ —Å–∂–∏–º–∞–Ω–∏–µ–º –∏—Ö.

### 4.2. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∏–ª—å SS14

* **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π**: –°—á–∏—Ç–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å —Ç–∞–∫–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π `OnEvent(EntityUid uid, MyComponent comp, Event args)`, –≤–º–µ—Å—Ç–æ –Ω–∏—Ö –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `OnEvent(Entity<MyComponent> ent, ref Event args)`
* **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:** –í–º–µ—Å—Ç–æ –º–µ—Ç–æ–¥–∞ `Method(EntityUid uid, MyComponent comp)` –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å —Ç–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç `Method(Entity<MyComponent> entity)`, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –Ω—ë–º debug —Å–±–æ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–º—É entity.
* **–Ø—Å–Ω–æ—Å—Ç—å:** –í–º–µ—Å—Ç–æ string –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç –∏ –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É –ø–µ—Ä–µ–¥–∞—é—â–∏–π –∏–ª–∏ —Ö—Ä–∞–Ω—è—â–µ–π –ø—Ä–æ—Ç–æ—Ç–∏–ø (–Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ `Prototype` –∏ –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ `[prototype]`, –∞ —Ç–∞–∫ –∂–µ —Ç–æ —á—Ç–æ –ø–æ—Ç–æ–º—É –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –≤ `_prototype.Resolve` –∏–ª–∏ `_prototype.TryIndex`) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ProtoId<T>`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ debug —Å–±–æ—Ä–∫–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å.
* **–°–æ–±—ã—Ç–∏—è:** –°–æ–±—ã—Ç–∏—è –≤—Å–µ–≥–¥–∞ —Å–ª–µ–¥—É–µ—Ç –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –≤ –≤–∏–¥–µ `record struct`, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –ª—É—á—à–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —á–µ–º –∫–ª–∞—Å—Å—ã. –ù–∞–ø—Ä–∏–º–µ—Ä
`[ByRefEvent]
public record struct SomeAttemptEvent(bool Cancelled=false);`

* **–£–¥–æ–±–Ω–æ–µ API**: –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ —Å–∏—Å—Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ —á—Ç–æ-—Ç–æ –º–µ–Ω—è—é—Ç –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –∫–∞–∫–∏–µ-—Ç–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å –º–µ—Ç–æ–¥—ã `TryDoSomething` –∏–ª–∏ `TryGetSomething` –∏–ª–∏ `ResolveSomething`, —É—á–∏—Ç—ã–≤–∞—è —á—Ç–æ `Try...` –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å bool —Å—Ç—Ä–æ–≥–æ —Ç—Ä–µ–±—É—é—â–∏–π –±—ã—Ç—å true –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –¥–µ–π—Å—Ç–≤–∏–∏, –∞ –º–µ—Ç–æ–¥—ã Resolve –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å **–∫–∞–∂–¥—ã–π** false —Å–æ–æ–±—â–∞—è –æ–± –æ—à–∏–±–∫–µ —á–µ—Ä–µ–∑ –ª–æ–≥–≥–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä `Log.Error($"Got invalid entity {ToPrettyString(uid)}!")`)
* **–ó–Ω–∞–Ω–∏–µ –º–µ—Ä—ã:** –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è `[DataField]` –≤–∫–ª—é—á–∞–µ—Ç `[ViewVariables(VVAccess.ReadWrite)]`, –ø–æ—ç—Ç–æ–º—É –≤–º–µ—Å—Ç–æ `[DataField, ViewVariables(VVAccess.ReadWrite)]` –ø—Ä–æ—Å—Ç–æ –ø–∏—à–µ—Ç—Å—è `[DataField]`
* **–ü–ª–∞–≤–∞—é—â–∏–µ –±–∏—Ç—ã:** –ù–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ–ª–µ –¥–∞–Ω–Ω—ã—Ö `NextTimeWork` —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º: `comp.NextTimeWork = curTime + comp.UpdateInterval;`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —á–∏—Å–µ–ª —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –≤–∞—Ä–∏–∞–Ω—Ç `comp.NextSound += comp.UpdateInterval;`. –í –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–∏ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `TimeSpan`, –∞ –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–π—Ç–µ –≤—Ä–µ–º—è –≤ –≤–∏–¥–µ —á–∏—Å–ª–∞ `float`.


### 4.3. –ò–≥—Ä–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–¥–æ–º

* **–ò–º–µ–Ω–∞:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏–º—ë–Ω –≤ –≤–∏–¥–∏–º—ã—Ö –∏–≥—Ä–æ–∫–∞–º –º–µ—Ç–æ–¥–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä `_popup.PopupEntity`), –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Identity.Name(uid) –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, –ø—Ä–∏—á–∏–Ω–∞ - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–∫—Ä—ã—Ç–∏—è –ª–∏—á–Ω–æ—Å—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–º–æ–ª–æ–¥–æ–π —á–µ–ª–æ–≤–µ–∫¬ª –≤–º–µ—Å—Ç–æ –£—Ä–∏—Å—Ç–ú–∞–∫–ß–µ–ª–æ–≤–µ–∫.

### 4.4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ECS (Entity Component System)

* **–ó–∞–∫–æ–Ω –†–∞–∑–¥–µ–ª–µ–Ω–∏—è:**
* ‚ùå **–ü–ª–æ—Ö–æ:** –õ–æ–≥–∏–∫–∞ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`MyComponent.cs`).
* ‚úÖ **–•–æ—Ä–æ—à–æ:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Äî —ç—Ç–æ —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ. –í—Å—è –ª–æ–≥–∏–∫–∞ ‚Äî –≤ –°–∏—Å—Ç–µ–º–µ (`MySystem.cs`).
* **Dependency Injection:** –ù–∞—Å—Ç–∞–∏–≤–∞—Ç—å –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∞—Ç—Ä–∏–±—É—Ç–∞ `[Dependency]` –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –≤–º–µ—Å—Ç–æ `IoCManager.Resolve<T>()`, –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ.
* **UI *.xaml.cs (–í–∞–∂–Ω–æ):** –í–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `IEntityManager` –∫–∞–∫ —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
* **Events (–°–æ–±—ã—Ç–∏—è):** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SubscribeLocalEvent<T>`

### 4.5. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ü–∞–º—è—Ç—å

* **Hot Paths (Update/FrameUpdate):**
* –ò–∑–±–µ–≥–∞—Ç—å LINQ (`Where`, `Select`, `ToList`), —Å–æ–∑–¥–∞—é—â–µ–≥–æ –∞–ª–ª–æ–∫–∞—Ü–∏–∏ (–∑–∞–º—ã–∫–∞–Ω–∏—è, –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã) –≤ –º–µ—Ç–æ–¥–∞—Ö, –≤—ã–∑—ã–≤–∞–µ–º—ã—Ö –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä. –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ü–∏–∫–ª—ã `for/foreach`.
* –ó–∞–ø—Ä–µ—Ç –Ω–∞ `new List<T>()` –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π –≤ —Ü–∏–∫–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–ª–∏–Ω–≥ –∏–ª–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π.

* **Entity Lookup:**
* ‚ùå **–ü–ª–æ—Ö–æ:** –ü–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ –º–∏—Ä–µ (`EntityManager.GetEntities()`).
* ‚úÖ **–•–æ—Ä–æ—à–æ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `EntityQuery<T>`, —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

* **Resolving:** –ò–∑–±–µ–≥–∞—Ç—å `Resolve<T>` –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–æ–≤. –ü–æ–ª—É—á–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞—Ä–∞–Ω–µ–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `GetEntityQuery`.

### 4.6. –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* **–í–∞–ª–∏–¥–∞—Ü–∏—è –°—É—â–Ω–æ—Å—Ç–µ–π:** –ü—Ä–æ–≤–µ—Ä–∫–∞ `Deleted(entity)` –∏ `!entity.Initialized` –ø–µ—Ä–µ–¥ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è–º–∏, –µ—Å–ª–∏ —Ä–∞–±–æ—Ç–∞ –∏–¥–µ—Ç —Å –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Ç–∞–π–º–µ—Ä–∞–º–∏.
* **Null-Safety:** C# 9.0+ –ø–∞—Ç—Ç–µ—Ä–Ω—ã. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `TryGetComponent` –≤–º–µ—Å—Ç–æ `GetComponent` (–∫–æ—Ç–æ—Ä—ã–π –∫–∏–¥–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ), –µ—Å–ª–∏ –Ω–∞–ª–∏—á–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ 100%.

### 4.7. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (Loc)

* **–•–∞—Ä–¥–∫–æ–¥ —Å—Ç—Ä–æ–∫:** –ó–∞–ø—Ä–µ—â–µ–Ω –¥–ª—è –ª—é–±–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, –≤–∏–¥–∏–º–æ–≥–æ –∏–≥—Ä–æ–∫—É, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ - —Ç–µ–∫—Å—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ —á–∞—Ç –∞–¥–º–∏–Ω–æ–≤ —Å–µ—Ä–≤–µ—Ä–æ–≤. –ò—Å–∫–ª—é—á–µ–Ω–∏–µ - —Ç–µ–∫—Å—Ç –≤ –µ–Ω—Ç–∏—Ç–∏ –Ω–∞ –∏–≥—Ä–æ–≤—ã—Ö –∫–∞—Ä—Ç–∞—Ö.
* **Loc.GetString:** –í–µ—Å—å —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ `Loc.GetString("string-id")`.
* **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (`Loc.GetString("my-message", ("user", uid))`) –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫, —Ç–∞–º –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ.

### 4.8. –ü—Ä–∞–≤–∏–ª–∞ YAML (–ü—Ä–æ—Ç–æ—Ç–∏–ø—ã –∏ –ö–æ–Ω—Ñ–∏–≥–∏)

* **–ö–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å —Å–ø–∏—Å–∫–æ–≤ (Compact Lists):**
* –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å—Ç–∏–ª—å —Å–ø–∏—Å–∫–æ–≤. –î–µ—Ñ–∏—Å `-` —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ **–ù–ï –¥–æ–ª–∂–µ–Ω** –∏–º–µ—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç—Å—Ç—É–ø–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–ª—é—á–∞.
* ‚ùå **–ü–ª–æ—Ö–æ (–õ–∏—à–Ω–∏–π –≤–æ–∑–¥—É—Ö):**
```yaml
effects:
  - !type:DoAfter
  - !type:Popup

```

* ‚úÖ **–•–æ—Ä–æ—à–æ (–ü–ª–æ—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞):**
```yaml
effects:
- !type:DoAfter
- !type:Popup

```

### 4.9. –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ –ò–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ –¢–≤–æ—Ä–µ—Ü –≤–Ω–æ—Å–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ **–ù–ï** –ª–µ–∂–∞—Ç –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–æ–∫ —Å –∏–º–µ–Ω–µ–º `SS220` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –∞–ø—Å—Ç—Ä–∏–º–∞), –æ–Ω –æ–±—è–∑–∞–Ω –æ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Ç–∫—É. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ª–∏—á–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ –æ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π —Ñ–æ—Ä–∫–∞.

* **–û–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–ª–∂–Ω–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏: `// SS220-feature-name` (–¥–ª—è C#) –∏–ª–∏ `# SS220-feature-name` (–¥–ª—è YAML).
* **–ë–ª–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π:** –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±–µ—Ä–Ω—É—Ç –≤ –æ—Ç–∫—Ä—ã–≤–∞—é—â–∏–π –∏ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:
```csharp
// SS220-feature-name-begin
... –≤–∞—à –∫–æ–¥ ...
// SS220-feature-name-end

```
* **–§–æ—Ä–º–∞—Ç:** –ù–µ —Å—Ç—Ä–æ–≥–∏–π, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π: `// SS220 My feature` –∏–ª–∏ –±–ª–æ–∫–∏ `// SS220-begin` ... `// SS220-end`. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–∞–ª–∏—á–∏–µ –º–µ—Ç–∫–∏.
* **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:** –•–æ—Ä–æ—à–∏–π —Ç–æ–Ω - –±–æ–ª—å—à–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–∞—Ö –∞–ø—Å—Ç—Ä–∏–º–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `ExampleUpstreamSystem.cs`, –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –≤ –Ω–æ–≤—ã–π —Ñ–∞–π–ª `ExampleUpstreamSystem.SS220.cs` –ø–æ–º–µ—á–∞—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å `partial`
* **–ù–µ–∑–Ω–∞–Ω–∏–µ - —Ç—å–º–∞:** –û–ø–∏—Å–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–º—É –∫–æ–¥—É
* **–ó–Ω–∞–Ω–∏–µ - —Å–≤–µ—Ç:** –ò–∑–º–µ–Ω–µ–Ω–∏—è, —Å—á–∏—Ç–∞—é—â–∏–µ—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ –æ—à–∏–±–æ–∫, –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—â–∏–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏/–∏–Ω—Ç–µ—Ä–∞–∫—Ü–∏–∏, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ —á–µ–π–Ω–¥–∂–ª–æ–≥ CL, —á—Ç–æ–±—ã —Å–æ–æ–±—â–∞—Ç—å —Å–∞–º—É—é –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é 

## 5.1 –ü—Ä–∏–º–µ—Ä –†–∞–±–æ—Ç—ã (–ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ C# / ECS)

**–ö–æ–¥ –≤ PR (—Ñ–∞–π–ª `Content.Server/Butler/ButlerBotSystem.cs`):**

```csharp
// –ú–µ—Ç–æ–¥ –≤–Ω—É—Ç—Ä–∏ —Å–∏—Å—Ç–µ–º—ã
public void CleanFloor(EntityUid uid, ButlerComponent component)
{
    var turf = _transform.GetWorldPosition(uid); // –£–ø—Ä–æ—â–µ–Ω–æ
    Thread.Sleep(2000); // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏

    // –ü—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥—Ä—É–≥–æ–π —Å–∏—Å—Ç–µ–º—ã/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±–µ–∑ –∏–≤–µ–Ω—Ç–∞
    var filth = EntityManager.GetComponent<FilthComponent>(uid);
    filth.Amount = 0;
}

```

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π Ouro:**

> **üëÅÔ∏è –í–∑–æ—Ä Ouro –æ–±–Ω–∞—Ä—É–∂–∏–ª —Ä–∞–∑—Ä—ã–≤ —Ü–∏–∫–ª–∞.**
> üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –†–∞–∑—Ä—ã–≤ –¶–∏–∫–ª–∞ (–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)**
> `Content.Server/Butler/ButlerBotSystem.cs:5`
> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Thread.Sleep(2000)` –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ. –≠—Ç–æ –∑–∞–º–æ—Ä–æ–∑–∏—Ç **–≤–µ—Å—å —Å–µ—Ä–≤–µ—Ä** –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã, –æ—Å—Ç–∞–Ω–æ–≤–∏–≤ –≤—Ä–µ–º—è –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤. –°–µ—Ä–≤–µ—Ä SS14 —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ.
> **–ú—É–¥—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DoAfterSystem` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π —Ç–∞–π–º–µ—Ä.
> üü° **–î–∏—Å–≥–∞—Ä–º–æ–Ω–∏—è (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)**
> –ü—Ä—è–º–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ `filth.Amount = 0` —Å–æ–∑–¥–∞–µ—Ç —Å–∏–ª—å–Ω—É—é —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å. –õ—É—á—à–µ –ø–æ–¥–Ω—è—Ç—å —Å–æ–±—ã—Ç–∏–µ (Event), –Ω–∞ –∫–æ—Ç–æ—Ä–æ–µ —Å—Ä–µ–∞–≥–∏—Ä—É–µ—Ç `FilthSystem` –∏ –æ—á–∏—Å—Ç–∏—Ç –≥—Ä—è–∑—å.
> **–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è:**
> ```csharp
> // 1. –ò–Ω–∏—Ü–∏–∏—Ä—É–µ–º –¥–µ–π—Å—Ç–≤–∏–µ (DoAfter)
> _doAfter.TryStartDoAfter(new DoAfterArgs(uid, 2.0f, new CleanFloorEvent(), uid));
>
> ```
>
>

> // 2. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
> private void OnCleanFloor(EntityUid uid, ButlerComponent component, CleanFloorEvent args)
> {
> if (args.Cancelled) return;
> // –ü–æ–¥–Ω–∏–º–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –æ—á–∏—Å—Ç–∫–∏, —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –≥—Ä—è–∑–∏ —Å–∞–º–∞ —Ä–µ—à–∏–ª–∞, –∫–∞–∫ —É–¥–∞–ª–∏—Ç—å—Å—è
> RaiseLocalEvent(uid, new CleanTileEvent());
> }
> ```
>
> ```
>
>

## 5.2 –ü—Ä–∏–º–µ—Ä –†–∞–±–æ—Ç—ã (–æ—Ç—Å—Ç—É–ø—ã –∏ —Å–∫–æ–±–∫–∏)

**–ö–æ–¥ –≤ PR (–ì—Ä—è–∑–Ω—ã–π —Å—Ç–∏–ª—å):**

```csharp
namespace Content.Server.Test { // ‚ùå –õ–∏—à–Ω–∏–µ —Å–∫–æ–±–∫–∏ namespace

    public class TestSystem : EntitySystem { // ‚ùå –°–∫–æ–±–∫–∞ –Ω–µ –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ, –Ω–µ—Ç sealed

        // ‚ùå –õ–∏—à–Ω—è—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ –Ω–∞—á–∞–ª–µ –∫–ª–∞—Å—Å–∞
        public override void Update(float frameTime) {

             var random = IoCManager.Resolve<IRobustRandom>();
             if (true) return; // ‚ùå –ú–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å, –Ω–æ –ª—É—á—à–µ –æ—Ñ–æ—Ä–º–∏—Ç—å —á–∏—â–µ

        } // ‚ùå –õ–∏—à–Ω—è—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
    }
}

```

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π Ouro:**

> **üëÅÔ∏è –í–∑–æ—Ä Ouro –æ–±–Ω–∞—Ä—É–∂–∏–ª –∏—Å–∫–∞–∂–µ–Ω–∏—è —Ñ–æ—Ä–º—ã.**
> üî¥ **–†–∞–∑—Ä—ã–≤ –°–≤—è–∑–µ–π (Dependency Injection)**
> `Content.Server/Test/TestSystem.cs:6`: –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `IoCManager`. –í–Ω–µ–¥—Ä–∏—Ç–µ `IRobustRandom` —á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç `[Dependency]`.
> üü° **–î–∏—Å–≥–∞—Ä–º–æ–Ω–∏—è –§–æ—Ä–º—ã (–°—Ç–∏–ª—å –∏ –û—Ç—Å—Ç—É–ø—ã)**
> –í–∞—à –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—É—Å—Ç–æ—Ç—É, –Ω–µ –Ω–µ—Å—É—â—É—é —Å–º—ã—Å–ª–∞.
> 1. **Namespace:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `file-scoped namespace`, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ–±–∫–∏.
> 2. **–°–∫–æ–±–∫–∏:** –ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ `{` –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ (Allman style).
> 3. **Padding:** –£–±–µ—Ä–∏—Ç–µ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ –º–µ—Ç–æ–¥–æ–≤/–∫–ª–∞—Å—Å–æ–≤. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–º.
> 4. **Sealed:** –ó–∞–ø–µ—á–∞—Ç–∞–π—Ç–µ –∫–ª–∞—Å—Å.
>
>
> **–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è:**
> ```csharp
> namespace Content.Server.Test; // ‚úÖ File-scoped
>
> ```
>
>

> public sealed class TestSystem : EntitySystem // ‚úÖ Sealed
> {
> [Dependency] private readonly IRobustRandom _random = default!;

> ```
> public override void Update(float frameTime) // ‚úÖ –°–∫–æ–±–∫–∞ –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ
> {
>     if (true)
>         return;
> }
>
> ```
>
>
> }
> ```
>
> ```
>
>
